(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{270:(e,t,s)=>{Promise.resolve().then(s.bind(s,690))},690:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(5155),n=s(2115),r=s(3238),l=s(2513),i=s(7208),o=s(2771),c=s(4219),d=s(1316),x=s(2227);function m(){let[e,t]=(0,n.useState)([]),[s,m]=(0,n.useState)(null),[u,h]=(0,n.useState)("events"),[v,f]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{var e;let s=await fetch("/api/auth/status");if(!s.ok){console.error("❌ Authentication check failed - redirecting to login"),window.location.href="/login";return}let a=await s.json();if(console.log("\uD83D\uDD0D MY EVENTS: Auth status:",a),!a.isAuthenticated||!a.user){console.error("❌ User not authenticated - redirecting to login"),window.location.href="/login";return}let n=a.user;m({id:n.id,name:n.name,username:n.username,email:n.email,phone:n.phone,trustScore:n.trust_score||50,verifiedAccounts:[],profileImage:"",avatar:n.avatar_url||"",bio:"",location:"",joinDate:new Date().toISOString(),isVerified:!1,flavor:"balanced",reviewsCount:0,friendsCount:0,socialLinks:{},phoneVerified:n.phone_verified||!1,emailVerified:n.email_verified||!1,eventsAttended:0}),console.log("✅ MY EVENTS: Authenticated user:",n.id,n.name);let r=await fetch("/api/my-events",{credentials:"include"});if(!r.ok)throw Error("Backend API failed: ".concat(r.status," ").concat(r.statusText));let l=await r.json();if(!l.success)throw Error("API returned error: ".concat(l.error||"Unknown error"));t(l.events||[]),console.log("✅ MY EVENTS: Loaded from backend:",(null==(e=l.events)?void 0:e.length)||0,"events");let i=JSON.parse(localStorage.getItem("userJourneys")||"[]");f(i)}catch(s){console.error("❌ MY EVENTS: Critical error loading user events:",s);let e=s instanceof Error?s.message:"Unknown error occurred";alert("Failed to load your events: ".concat(e,"\n\nPlease refresh the page or contact support if this continues.")),t([])}})()},[]);let g=(e=>{let t=new Date,s=new Date(t);s.setDate(s.getDate()+1);let a=new Date(t);return a.setDate(a.getDate()+7),{today:e.filter(e=>new Date(e.event_date||e.date).toDateString()===t.toDateString()),tomorrow:e.filter(e=>new Date(e.event_date||e.date).toDateString()===s.toDateString()),nextWeek:e.filter(e=>{let t=new Date(e.event_date||e.date);return t>s&&t<=a}),future:e.filter(e=>new Date(e.event_date||e.date)>a)}})(e),p=e=>{let t=(e=>{let t=new Date(e.event_date||e.date),s=new Date,a=t.getTime()-s.getTime(),n=Math.ceil(a/864e5),r=Math.ceil(a/36e5);return a<0?{text:"Ended",color:"text-slate-500"}:r<24?{text:"".concat(r,"hrs until start"),color:"text-cyan-600"}:{text:"".concat(n," days until start"),color:"text-cyan-600"}})(e);return e.maxAttendees,e.attendeeCount,(0,a.jsx)("div",{className:"pl-6 border-l-2 border-slate-200 pb-6 last:pb-0",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -left-[29px] top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-white border-2 border-cyan-500"}),(0,a.jsxs)("div",{className:"card-soft",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-800",children:e.title}),(0,a.jsx)("span",{className:"text-sm ".concat(t.color),children:t.text})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-slate-600 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.A,{className:"w-4 h-4 text-cyan-500"}),(0,a.jsxs)("span",{children:[e.attendeeCount,"/",e.maxAttendees," Attending"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.A,{className:"w-4 h-4 text-cyan-500"}),(0,a.jsx)("span",{children:e.location})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 text-cyan-500"}),(0,a.jsx)("span",{children:e.time})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{className:"flex-1 py-2 px-3 bg-slate-100 hover:bg-slate-200 rounded-xl text-sm font-medium transition-colors duration-200 flex items-center justify-center space-x-1",onClick:()=>window.location.href="/events/".concat(e.id),children:[(0,a.jsx)(c.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Manage Attendees"})]}),(0,a.jsxs)("button",{className:"flex-1 py-2 px-3 bg-slate-100 hover:bg-slate-200 rounded-xl text-sm font-medium transition-colors duration-200 flex items-center justify-center space-x-1",onClick:()=>window.location.href="/events/".concat(e.id,"/edit"),children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Edit Event"})]})]})]})]})},e.id)};return(0,a.jsx)(r.default,{children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"My Events & Journeys"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Manage your created events and planned journeys"})]}),(0,a.jsxs)("div",{className:"flex space-x-1 mb-6 bg-slate-100 rounded-xl p-1",children:[(0,a.jsxs)("button",{onClick:()=>h("events"),className:"flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors duration-200 ".concat("events"===u?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"),children:["\uD83D\uDCC5 My Events (",e.length,")"]}),(0,a.jsxs)("button",{onClick:()=>h("journeys"),className:"flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors duration-200 ".concat("journeys"===u?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"),children:["\uD83D\uDDFA️ My Journeys (",v.length,")"]})]}),"events"===u&&(0,a.jsx)(a.Fragment,{children:0===e.length?(0,a.jsxs)("div",{className:"card-soft text-center py-12",children:[(0,a.jsx)(x.A,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"No Events Created"}),(0,a.jsx)("p",{className:"text-slate-500 mb-6",children:"You haven't created any events yet"})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[g.today.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"TODAY"}),(0,a.jsx)("div",{className:"space-y-4",children:g.today.map(p)})]}),g.tomorrow.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"TOMORROW"}),(0,a.jsx)("div",{className:"space-y-4",children:g.tomorrow.map(p)})]}),g.nextWeek.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"NEXT WEEK"}),(0,a.jsx)("div",{className:"space-y-4",children:g.nextWeek.map(p)})]}),g.future.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"FUTURE EVENTS"}),(0,a.jsx)("div",{className:"space-y-4",children:g.future.map(p)})]})]})}),"journeys"===u&&(0,a.jsx)(a.Fragment,{children:0===v.length?(0,a.jsxs)("div",{className:"card-soft text-center py-12",children:[(0,a.jsx)(i.A,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"No Journeys Saved"}),(0,a.jsx)("p",{className:"text-slate-500 mb-6",children:"Start creating journeys on the Discover page"}),(0,a.jsx)("button",{onClick:()=>window.location.href="/events",className:"py-2 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg text-sm font-medium transition-colors duration-200",children:"\uD83D\uDDFA️ Start Discovering"})]}):(0,a.jsx)("div",{className:"space-y-4",children:v.map((e,t)=>{let s=e.events.reduce((e,t)=>e+t.price,0);e.events.reduce((e,t)=>e+t.journeyTiming,0);let n=e.events.length;return(0,a.jsxs)("div",{className:"card-soft",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-800 mb-1",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:["Created ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm text-slate-600",children:[n," events"]}),(0,a.jsxs)("div",{className:"text-sm text-cyan-600 font-medium",children:["$",s," total"]})]})]}),(0,a.jsx)("div",{className:"space-y-2 mb-4",children:e.events.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-slate-50 rounded-lg p-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-lg",children:{tech:"\uD83D\uDCBB",social:"\uD83C\uDF89",arts:"\uD83C\uDFA8",adventure:"\uD83E\uDD7E",food:"\uD83C\uDF55",entertainment:"\uD83C\uDFAD",sports:"\uD83C\uDFC3",professional:"\uD83D\uDCDA"}[e.category]||"\uD83D\uDCC5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm text-slate-800",children:e.title}),(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:[e.time," • ",e.location]})]})]}),(0,a.jsxs)("div",{className:"text-xs text-slate-600",children:[Math.round(e.journeyTiming/60),"h"]})]},t))}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,a.jsx)("button",{onClick:()=>{let t=encodeURIComponent(JSON.stringify(e));window.location.href="/events?journey=".concat(t)},className:"py-2 px-3 bg-cyan-100 hover:bg-cyan-200 text-cyan-700 rounded-xl text-sm font-medium transition-colors duration-200",children:"\uD83D\uDCCD View"}),(0,a.jsx)("button",{onClick:async()=>{let t=e.events.reduce((e,t)=>e+t.price,0),s=e.events.length,a="\uD83D\uDDFA️ Check out my Phoenix journey! ".concat(s," events, $").concat(t," total. Join me on Scoop! \uD83D\uDE80");try{navigator.share?await navigator.share({title:e.name,text:a}):(await navigator.clipboard.writeText(a),alert("Journey details copied to clipboard!"))}catch(e){try{await navigator.clipboard.writeText(a),alert("Journey details copied to clipboard!")}catch(e){alert("Sharing not supported on this device")}}},className:"py-2 px-3 bg-green-100 hover:bg-green-200 text-green-700 rounded-xl text-sm font-medium transition-colors duration-200",children:"\uD83D\uDCE4 Share"}),(0,a.jsx)("button",{onClick:()=>{let e=JSON.parse(localStorage.getItem("userJourneys")||"[]").filter((e,s)=>s!==t);localStorage.setItem("userJourneys",JSON.stringify(e)),f(e)},className:"py-2 px-3 bg-red-100 hover:bg-red-200 text-red-700 rounded-xl text-sm font-medium transition-colors duration-200",children:"\uD83D\uDDD1️"})]})]},t)})})})]})})}},1316:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(2115);let n=a.forwardRef(function(e,t){let{title:s,titleId:n,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),s?a.createElement("title",{id:n},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))})},2513:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(2115);let n=a.forwardRef(function(e,t){let{title:s,titleId:n,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),s?a.createElement("title",{id:n},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))})},2771:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(2115);let n=a.forwardRef(function(e,t){let{title:s,titleId:n,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),s?a.createElement("title",{id:n},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},7208:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(2115);let n=a.forwardRef(function(e,t){let{title:s,titleId:n,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),s?a.createElement("title",{id:n},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))})}},e=>{e.O(0,[4684,4236,3238,8441,5964,7358],()=>e(e.s=270)),_N_E=e.O()}]);