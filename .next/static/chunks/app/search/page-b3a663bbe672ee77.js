(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2959],{58:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(2115);let n=r.forwardRef(function(e,t){let{title:s,titleId:n,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))})},1997:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(5155),n=s(2115),a=s(6766),l=s(6874),i=s.n(l),o=s(3238),c=s(2236),d=s(4188),u=s(4236),m=s(8046);let h=n.forwardRef(function(e,t){let{title:s,titleId:r,...a}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),s?n.createElement("title",{id:r},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))});var x=s(4170),f=s(7208),p=s(9337),v=s(2771),g=s(58),w=s(5565);function j(){let{authState:e,user:t}=(0,u.A)(),[s,l]=(0,n.useState)(""),[j,b]=(0,n.useState)("people"),[N,y]=(0,n.useState)(0),[k,S]=(0,n.useState)(!1),[C,E]=(0,n.useState)(0),[A,L]=(0,n.useState)([]),[M,T]=(0,n.useState)(!1),[O,R]=(0,n.useState)(null),[H,_]=(0,n.useState)({}),[q,F]=(0,n.useState)({}),P=async e=>{if(t&&0!==e.length)try{let r=await fetch("/api/friends/requests?userId=".concat(t.id,"&type=sent"));if(r.ok){var s;let t=await r.json(),n={};null==(s=t.requests)||s.forEach(t=>{let s=parseInt(t.toUserId);e.includes(s)&&(n[s]=!0)}),F(n),console.log("\uD83D\uDCE4 Found sent requests:",n)}let n={};e.forEach(e=>{q[e]?n[e]="pending":n[e]="none"}),_(n)}catch(e){console.error("Error checking friendship status:",e)}},U=async()=>{if(!s.trim())return void L([]);T(!0);try{var r,n,a;let l=[];try{let e=await fetch("/api/admin/users",{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){let t=await e.json();console.log("\uD83D\uDD0D SEARCH: Found real users from backend:",(null==(a=t.users)?void 0:a.length)||0),l=[...(t.users||[]).map(e=>{var t;return{id:e.id,name:e.name||"User",username:e.username||(null==(t=e.name)?void 0:t.split(" ")[0])||"user",email:e.email||"",bio:e.bio||"ScoopSocials user",location:e.location||"Location not set",avatar:e.avatar||"/default-avatar.png",trustScore:e.trustScore||75,friendsCount:e.friendsCount||0,reviewsCount:e.reviewsCount||0,isVerified:e.email_verified||e.phone_verified||!1,joinDate:e.created_at?new Date(e.created_at).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],phone:e.phone||"",phoneVerified:e.phone_verified||!1,emailVerified:e.email_verified||!1}})]}else console.log("\uD83D\uDD0D SEARCH: Backend users endpoint failed with status:",e.status)}catch(e){console.log("\uD83D\uDD0D SEARCH: Backend connection failed:",e instanceof Error?e.message:"Unknown error")}let i=l.filter((e,t,s)=>t===s.findIndex(t=>t.email===e.email||t.id===e.id)),o=(null==t?void 0:t.email)||(null==(r=e.user)?void 0:r.email),c=String((null==t?void 0:t.id)||(null==(n=e.user)?void 0:n.id)||""),d=i.filter(e=>{var t,r,n;return e.email!==o&&String(e.id)!==c&&(e.name.toLowerCase().includes(s.toLowerCase())||(null==(t=e.bio)?void 0:t.toLowerCase().includes(s.toLowerCase()))||(null==(r=e.location)?void 0:r.toLowerCase().includes(s.toLowerCase()))||(null==(n=e.username)?void 0:n.toLowerCase().includes(s.toLowerCase())))&&e.trustScore>=N});if(console.log("\uD83D\uDD0D SEARCH: Total users found:",d.length),L(d),d.length>0){let e=d.map(e=>e.id);await P(e)}}catch(e){console.error("Search error:",e),L([])}finally{T(!1)}},I=async s=>{if(!t)return void console.error("Cannot send friend request: No current user");R(s);try{var r,n,a,l,i,o,c;let d=A.find(e=>e.id===s);if(!d)return void console.error("Target user not found");let u=await fetch("/api/friends/requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fromUserId:(null==(r=t.id)?void 0:r.toString())||(null==(n=e.user)?void 0:n.id)||"unknown",toUserId:s.toString(),fromUser:{id:t.id||(null==(a=e.user)?void 0:a.id)||"unknown",name:t.name||(null==(l=e.user)?void 0:l.name)||"User",username:t.username||(null==(i=e.user)?void 0:i.username)||"user",email:t.email||(null==(o=e.user)?void 0:o.email)||"",avatar:t.picture||(null==(c=e.user)?void 0:c.picture)||"/default-avatar.png"},toUser:{id:d.id,name:d.name,username:d.username,email:d.email,avatar:d.avatar}})}),m=await u.json();u.ok?(console.log("\uD83E\uDD1D SEARCH: Friend request sent successfully to:",d.name),_(e=>({...e,[s]:"pending"})),F(e=>({...e,[s]:!0})),alert("Friend request sent to ".concat(d.name,"!"))):(console.error("\uD83E\uDD1D SEARCH: Friend request failed:",m.error),alert(m.error||"Failed to send friend request"))}catch(e){console.error("Error sending friend request:",e),alert("An error occurred while sending friend request")}finally{R(null)}};(0,n.useEffect)(()=>{let e=setTimeout(()=>{s.trim()&&U()},500);return()=>clearTimeout(e)},[s,N]);let B=["people","location"];return(0,r.jsx)(o.default,{children:(0,r.jsxs)("div",{className:"p-4 space-y-8",children:[(0,r.jsxs)("div",{className:"text-center mb-2",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Search"}),(0,r.jsx)("p",{className:"text-slate-600",children:"Find trusted people and places in your community"})]}),(0,r.jsxs)("div",{className:"card-soft",children:[(0,r.jsxs)("div",{className:"relative mb-4",children:[(0,r.jsx)(m.A,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),(0,r.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Search for people, places, or skills...",className:"w-full pl-10 pr-12 py-3 rounded-xl border border-slate-200 bg-white/80 backdrop-blur-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200"}),(0,r.jsx)("button",{onClick:()=>S(!k),className:"absolute right-3 top-3 p-1 rounded-lg hover:bg-slate-100 transition-colors duration-200",children:(0,r.jsx)(h,{className:"w-5 h-5 text-slate-400"})})]}),k&&(0,r.jsx)("div",{className:"space-y-4 p-4 bg-slate-50 rounded-xl",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Minimum Trust Score"}),(0,r.jsx)("input",{type:"range",min:"0",max:"100",value:N,onChange:e=>y(parseInt(e.target.value)),className:"w-full"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[(0,r.jsx)("span",{children:"Any"}),(0,r.jsxs)("span",{children:[N,"+"]}),(0,r.jsx)("span",{children:"100"})]})]})})]}),(0,r.jsxs)("div",{className:"flex bg-slate-100 rounded-xl p-1",onTouchStart:e=>{E(e.touches[0].clientX)},onTouchEnd:e=>{let t=C-e.changedTouches[0].clientX;if(Math.abs(t)>50){let e=B.indexOf(j);t>0&&e<B.length-1?b(B[e+1]):t<0&&e>0&&b(B[e-1])}},children:[(0,r.jsxs)("button",{onClick:()=>b("people"),className:"flex-1 py-3 px-4 rounded-lg text-sm font-medium transition-all duration-200 ".concat("people"===j?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"),children:[(0,r.jsx)(x.A,{className:"w-4 h-4 inline mr-2"}),"People"]}),(0,r.jsxs)("button",{onClick:()=>b("location"),className:"flex-1 py-3 px-4 rounded-lg text-sm font-medium transition-all duration-200 ".concat("location"===j?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"),children:[(0,r.jsx)(f.A,{className:"w-4 h-4 inline mr-2"}),"Places"]})]}),"people"===j&&(0,r.jsx)("div",{className:"space-y-4",children:M?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)(d.A,{})}):s?A.length>0?(0,r.jsx)("div",{className:"space-y-4",children:A.map(e=>(0,r.jsx)("div",{className:"card-soft hover:shadow-md transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(i(),{href:"/user/".concat(e.id),className:"relative",children:[(0,r.jsx)(a.default,{src:e.avatar||"/default-avatar.png",alt:e.name,width:56,height:56,className:"rounded-xl hover:opacity-90 transition-opacity duration-200"}),e.isVerified&&(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-primary-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-xs",children:"✓"})})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)(i(),{href:"/user/".concat(e.id),className:"hover:text-cyan-600 transition-colors duration-200",children:(0,r.jsx)("h3",{className:"font-semibold text-slate-800",children:e.name})}),(0,r.jsx)(c.A,{score:e.trustScore,size:"sm"})]}),(0,r.jsx)(i(),{href:"/user/".concat(e.id),className:"block hover:text-cyan-600 transition-colors duration-200",children:(0,r.jsxs)("p",{className:"text-sm text-slate-600 mb-1",children:["@",e.username]})}),(0,r.jsx)("p",{className:"text-sm text-slate-500 line-clamp-1",children:e.bio||"No bio available"}),(0,r.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:[e.location||"Location not set"," • ",e.friendsCount," friends • ",e.reviewsCount," reviews"]})]}),(0,r.jsx)("div",{className:"flex flex-col space-y-2",children:(()=>{let t=H[e.id]||"none",s=O===e.id;return"friends"===t?(0,r.jsxs)("button",{disabled:!0,className:"flex items-center justify-center px-3 py-2 rounded-lg text-sm font-medium bg-green-100 text-green-700",children:[(0,r.jsx)(p.A,{className:"w-4 h-4 mr-1"}),"Friends"]}):"pending"===t||s?(0,r.jsxs)("button",{disabled:!0,className:"flex items-center justify-center px-3 py-2 rounded-lg text-sm font-medium bg-orange-100 text-orange-700",children:[(0,r.jsx)(v.A,{className:"w-4 h-4 mr-1"}),s?"Sending...":"Pending"]}):(0,r.jsxs)("button",{onClick:()=>I(e.id),className:"flex items-center justify-center px-3 py-2 rounded-lg text-sm font-medium bg-cyan-500 text-white hover:bg-cyan-600 transition-colors",children:[(0,r.jsx)(g.A,{className:"w-4 h-4 mr-1"}),"Add Friend"]})})()})]})},e.id))}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsxs)("div",{className:"text-slate-500",children:['No users found matching "',s,'"']})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Recent Searches"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:["Sarah Chen","UX Designers in SF","Personal Trainers","Austin Events"].map((e,t)=>(0,r.jsx)("button",{onClick:()=>l(e),className:"px-3 py-2 bg-slate-100 text-slate-700 rounded-lg text-sm hover:bg-slate-200 transition-colors",children:e},t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Popular Categories"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{name:"Professionals",icon:"\uD83D\uDCBC",count:234},{name:"Event Hosts",icon:"\uD83C\uDF89",count:156},{name:"Service Providers",icon:"\uD83D\uDD27",count:189},{name:"Venues",icon:"\uD83C\uDFE2",count:67}].map((e,t)=>(0,r.jsxs)("button",{onClick:()=>l(e.name),className:"p-4 bg-white border border-slate-200 rounded-xl text-left hover:border-cyan-300 transition-colors",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:e.icon}),(0,r.jsx)("div",{className:"font-medium text-slate-800",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-slate-500",children:[e.count," people"]})]},t))})]})]})}),"location"===j&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(w.A,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-slate-800 mb-2",children:"Location Search"}),(0,r.jsx)("p",{className:"text-slate-500",children:"Search for venues and places coming soon!"})]})]})})}},2236:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(5155);s(2115);let n=e=>{let{score:t,size:s="md",showLabel:n=!1}=e,a=(e=>e>=90?"excellent":e>=80?"verygood":e>=70?"good":e>=60?"fair":"poor")(t),l=(e=>{switch(e){case"excellent":return"bg-trust-excellent text-white";case"verygood":return"bg-trust-verygood text-white";case"good":return"bg-trust-good text-white";case"fair":return"bg-trust-fair text-slate-800";case"poor":return"bg-trust-poor text-slate-800";default:return"bg-slate-400 text-white"}})(a),i=(e=>{switch(e){case"sm":return"text-xs px-2 py-1";case"lg":return"text-lg px-4 py-2";default:return"text-sm px-3 py-1"}})(s);return(0,r.jsxs)("div",{className:"".concat(l," ").concat(i," rounded-full font-bold inline-flex items-center justify-center min-w-0 whitespace-nowrap shadow-sm"),children:[t,n&&"sm"!==s&&(0,r.jsx)("span",{className:"ml-1 font-medium text-xs",children:(e=>{switch(e){case"excellent":return"Excellent";case"verygood":return"Very Good";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return"Unknown"}})(a)})]})}},2771:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(2115);let n=r.forwardRef(function(e,t){let{title:s,titleId:n,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},5565:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(2115);let n=r.forwardRef(function(e,t){let{title:s,titleId:n,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))})},7208:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(2115);let n=r.forwardRef(function(e,t){let{title:s,titleId:n,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))})},8488:(e,t,s)=>{Promise.resolve().then(s.bind(s,1997))},9337:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(2115);let n=r.forwardRef(function(e,t){let{title:s,titleId:n,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))})}},e=>{e.O(0,[4684,6766,4236,3238,4188,8441,5964,7358],()=>e(e.s=8488)),_N_E=e.O()}]);