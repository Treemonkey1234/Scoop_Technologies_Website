(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8634],{1580:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var n=s(5155),a=s(2115),r=s(2119);let o=e=>{let{isOpen:t,onClose:s,contentType:o,contentId:l,contentTitle:i}=e,[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[x,g]=(0,a.useState)(!1),h=async e=>{e.preventDefault(),c&&(g(!0),await new Promise(e=>setTimeout(e,1e3)),alert("Flag submitted successfully. Our moderation team will review this content."),g(!1),s(),d(""),m(""))};return t?(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-slate-800",children:["Flag ","post"===o?"Post":"event"===o?"Event":"comment"===o?"Comment":"Social Account"]}),(0,n.jsx)("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:(0,n.jsx)(r.A,{className:"w-5 h-5 text-slate-500"})})]}),(0,n.jsxs)("form",{onSubmit:h,className:"p-6 space-y-4",children:[i&&(0,n.jsx)("div",{className:"p-3 bg-slate-50 rounded-lg",children:(0,n.jsxs)("p",{className:"text-sm text-slate-600",children:["Flagging: ",(0,n.jsx)("span",{className:"font-medium",children:i})]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Reason for flagging *"}),(0,n.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:({post:["Misinformation/False Claims","Doxxing/Privacy Violation","Spam/Promotional Content","Harassment/Bullying","Hate Speech/Discrimination","Inappropriate Content","Fake Review/Manipulation","Off-Topic Content","Copyright Violation","Other"],event:["False Location/Venue Information","Scam/Fraudulent Event","Safety Concerns","Inappropriate Content","Spam/Promotional Abuse","Misleading Event Details","Copyright Violation","Other"],social:["Stolen/Fake Account","Fake Followers/Engagement","Impersonation","Inappropriate Content","Spam Account","Other"],comment:["Harassment/Bullying","Hate Speech/Discrimination","Spam/Promotional Content","Inappropriate Content","Off-Topic Comment","Misinformation/False Claims","Personal Attack","Other"]})[o].map(e=>(0,n.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,n.jsx)("input",{type:"radio",name:"flagReason",value:e,checked:c===e,onChange:e=>d(e.target.value),className:"w-4 h-4 text-primary-500 border-slate-300 focus:ring-primary-500"}),(0,n.jsx)("span",{className:"text-sm text-slate-700",children:e})]},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Additional details (optional)"}),(0,n.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),placeholder:"Provide any additional context that would help our moderation team...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none",rows:3})]}),(0,n.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:(0,n.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,n.jsx)("strong",{children:"Note:"})," False flags may impact your trust score. Only flag content that violates our community guidelines."]})}),(0,n.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,n.jsx)("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),(0,n.jsx)("button",{type:"submit",disabled:!c||x,className:"flex-1 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?"Submitting...":"Submit Flag"})]})]})]})}):null}},2236:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(5155);s(2115);let a=e=>{let{score:t,size:s="md",showLabel:a=!1}=e,r=(e=>e>=90?"excellent":e>=80?"verygood":e>=70?"good":e>=60?"fair":"poor")(t),o=(e=>{switch(e){case"excellent":return"bg-trust-excellent text-white";case"verygood":return"bg-trust-verygood text-white";case"good":return"bg-trust-good text-white";case"fair":return"bg-trust-fair text-slate-800";case"poor":return"bg-trust-poor text-slate-800";default:return"bg-slate-400 text-white"}})(r),l=(e=>{switch(e){case"sm":return"text-xs px-2 py-1";case"lg":return"text-lg px-4 py-2";default:return"text-sm px-3 py-1"}})(s);return(0,n.jsxs)("div",{className:"".concat(o," ").concat(l," rounded-full font-bold inline-flex items-center justify-center min-w-0 whitespace-nowrap shadow-sm"),children:[t,a&&"sm"!==s&&(0,n.jsx)("span",{className:"ml-1 font-medium text-xs",children:(e=>{switch(e){case"excellent":return"Excellent";case"verygood":return"Very Good";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return"Unknown"}})(r)})]})}},2513:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(2115);let a=n.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?n.createElement("title",{id:a},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))})},2771:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(2115);let a=n.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?n.createElement("title",{id:a},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},4167:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A});var n=s(5155),a=s(2115);s(8689);var r=s(6766),o=s(6874),l=s.n(o),i=s(5695),c=s(3238),d=s(2236),u=s(1580),m=s(4224),x=s(4236),g=s(8910),h=s(5411),p=s.n(h);s(3735);var v=s(5442),b=s(5529),f=s(2227),y=s(7208),j=s(2513),N=s(9949),w=s(4307),D=s(2771),E=s(2119),k=s(8984);let C=null;function S(e,t,s,n){let a=(s-e)*Math.PI/180,r=(n-t)*Math.PI/180,o=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*3959}function A(){let e=(0,i.useRouter)(),{authState:t,isLoading:s,user:o,requireAuth:h}=(0,x.A)(),[A,M]=(0,a.useState)("upcoming"),[I,T]=(0,a.useState)({}),[P,L]=(0,a.useState)([]),[O,F]=(0,a.useState)([]),[U,V]=(0,a.useState)(!1),[R,J]=(0,a.useState)(C),[B,G]=(0,a.useState)("pending"),[H,z]=(0,a.useState)({}),[W,_]=(0,a.useState)({}),[Z,Y]=(0,a.useState)(""),[K,Q]=(0,a.useState)([]);(0,a.useEffect)(()=>{if(o){let e=JSON.parse(localStorage.getItem("userRsvps")||"{}"),t={};Object.entries(e).forEach(e=>{let[s,n]=e;String(n.userId)===String(o.id)&&(t[s]=n.status)}),z(t),console.log("\uD83D\uDCCB Loaded user RSVPs:",t)}},[o]);let $=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/events",{credentials:"include"});if(!e.ok)throw Error("Events API failed: ".concat(e.status," ").concat(e.statusText));let t=await e.json();if(!t.success)throw Error("Events API error: ".concat(t.error||"Unknown error"));let s=t.events||[],n=(0,m.zu)();L(s),F(n),console.log("✅ EVENTS PAGE: Loaded",s.length,"events from backend");let a=s.filter(e=>"public-all"===e.eventType||"friends"===e.eventType||"public"===e.eventType||!e.isPrivate),r=a;R&&"granted"===B&&R.coordinates&&Array.isArray(R.coordinates)&&R.coordinates.length>=2&&(r=a.filter(e=>!e.latitude||!e.longitude||50>=S(R.coordinates[1],R.coordinates[0],e.latitude,e.longitude))),Q(r);let o=new URLSearchParams(window.location.search).get("journey");if(o)try{let e=JSON.parse(decodeURIComponent(o));eJ(e)}catch(e){console.error("Error parsing journey parameter:",e)}}catch(t){console.error("❌ EVENTS PAGE: Critical error loading events:",t);let e=t instanceof Error?t.message:"Unknown error occurred";alert("Failed to load events: ".concat(e,"\n\nPlease refresh the page or contact support if this continues.")),L([])}},[R,B]);(0,a.useEffect)(()=>{if(console.log("\uD83D\uDD0D EVENTS PAGE: Authentication effect triggered"),console.log("\uD83D\uDD0D EVENTS PAGE: Current state:",{authLoading:s,isAuthenticated:t.isAuthenticated,needsOnboarding:t.needsOnboarding,userData:t.user?{id:t.user.id,scoopUserId:t.user.scoopUserId,username:t.user.username,phone:t.user.phone}:null}),!s&&!U){if(!t.isAuthenticated){console.log("\uD83D\uDD0D EVENTS PAGE: User not authenticated, redirecting to signin"),V(!0),e.push("/signin");return}console.log("\uD83D\uDD0D EVENTS PAGE: User authenticated, loading data"),$()}},[s,t.isAuthenticated,U,e,$]);let[q,X]=(0,a.useState)({isOpen:!1,contentType:"event",contentId:"",contentTitle:""}),ee=(0,a.useRef)(null),et=(0,a.useRef)(null),es=(0,a.useRef)(null),[en,ea]=(0,a.useState)(0),[er,eo]=(0,a.useState)([]),[el,ei]=(0,a.useState)([]),[ec,ed]=(0,a.useState)([]),[eu,em]=(0,a.useState)([]),[ex,eg]=(0,a.useState)({viewed:0,liked:0,maybe:0,notify:0}),[eh,ep]=(0,a.useState)(!1),[ev,eb]=(0,a.useState)(!1),[ef,ey]=(0,a.useState)(!1),[ej,eN]=(0,a.useState)(!1),[ew,eD]=(0,a.useState)(""),[eE,ek]=(0,a.useState)({distance:"All",category:"",time:"All",trustLevel:"All"}),eC=()=>Z?K.filter(e=>e.category===Z):K;(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("userLocation"),t=localStorage.getItem("locationPermission");if(e&&"granted"===t){let t=JSON.parse(e);J(t),C=t,G("granted"),console.log("✅ Using saved location:",t),setTimeout(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{let{latitude:s,longitude:n}=e.coords;S(t.coordinates[1],t.coordinates[0],s,n)>.062&&(eS({coordinates:[n,s],address:"Your current location"}),console.log("\uD83D\uDD04 Updated location in background - moved significantly"))},()=>{},{enableHighAccuracy:!1,timeout:5e3,maximumAge:6e4})},2e3);return}if("geolocation"in navigator){console.log("\uD83D\uDDFA️ Automatically detecting user location...");let e=(e,t)=>new Promise((s,n)=>{navigator.geolocation.getCurrentPosition(s,n,{enableHighAccuracy:e,timeout:t,maximumAge:e?6e4:3e5})});try{let t;try{t=await e(!0,8e3),console.log("✅ High accuracy location obtained")}catch(s){console.log("⚠️ High accuracy failed, trying standard accuracy..."),t=await e(!1,2e4),console.log("✅ Standard accuracy location obtained")}let{latitude:s,longitude:n}=t.coords,a={coordinates:[n,s],address:"Your location"};if(localStorage.setItem("userLocation",JSON.stringify(a)),localStorage.setItem("locationPermission","granted"),J(a),C=a,G("granted"),console.log("✅ User location automatically detected and saved:",s,n),window.dispatchEvent(new CustomEvent("userLocationUpdated")),es.current&&eh){console.log("\uD83D\uDDFA️ Adding user marker after location update");let e=(0,g.RT)({id:"user-auto",title:"Your Location",longitude:n,latitude:s});e&&es.current.addUserLocationMarker(e)}}catch(t){console.warn("Initial geolocation failed:",t.message),console.log("\uD83D\uDD04 Retrying location detection in 3 seconds..."),setTimeout(async()=>{try{let{latitude:t,longitude:s}=(await e(!1,3e4)).coords,n={coordinates:[s,t],address:"Your location"};localStorage.setItem("userLocation",JSON.stringify(n)),localStorage.setItem("locationPermission","granted"),J(n),C=n,G("granted"),console.log("✅ Location detected on retry:",t,s),window.dispatchEvent(new CustomEvent("userLocationUpdated"))}catch(e){console.warn("Retry also failed - no automatic location available"),G("denied"),localStorage.setItem("locationPermission","denied"),J(null),C=null}},3e3)}}else"geolocation"in navigator?(console.log("\uD83D\uDD27 Auto-detect disabled - waiting for manual location selection"),G("denied")):(console.warn("Geolocation not supported"),G("denied"),localStorage.setItem("locationPermission","denied"),console.log("❌ Geolocation not supported - no fallback location")),J(null),C=null}catch(e){console.error("Error initializing location:",e),J(null),C=null,G("denied")}})()},[]);let eS=e=>{J(e),C=e,G("granted"),localStorage.setItem("userLocation",JSON.stringify(e)),localStorage.setItem("locationPermission","granted"),console.log("✅ Location updated and saved:",e),window.dispatchEvent(new CustomEvent("userLocationUpdated"))};(0,a.useEffect)(()=>{if(P.length>0){let e=P.filter(e=>!e.isPrivate),t=e;R&&"granted"===B&&R.coordinates&&Array.isArray(R.coordinates)&&R.coordinates.length>=2&&(t=e.filter(e=>!e.latitude||!e.longitude||50>=S(R.coordinates[1],R.coordinates[0],e.latitude,e.longitude))),Q(t),console.log("\uD83D\uDCCD Updated discoverable events for location. Found ".concat(t.length," events within 50 miles"))}},[R,B,P]),(0,a.useEffect)(()=>{console.log("\uD83D\uDDFA️ DISCOVER TAB EFFECT:",{activeTab:A,hasMapContainer:!!ee.current,mapLoaded:eh,hasMap:!!et.current,shouldInitialize:"discover"===A&&ee.current&&!eh}),"discover"===A&&ee.current&&!eh&&(console.log("\uD83D\uDDFA️ INITIALIZING MAP via useEffect"),eA())},[A,eh]),(0,a.useEffect)(()=>{eh&&es.current&&eI()},[eh,er,el,en,Z]),(0,a.useEffect)(()=>{let e=e=>{let{eventId:t}=e.detail,s=eC().findIndex(e=>e.id===t);-1!==s&&ea(s)};return window.addEventListener("eventMarkerClick",e),()=>{window.removeEventListener("eventMarkerClick",e)}},[]);let eA=async()=>{try{var e;if(console.log("\uD83D\uDDFA️ initializeMapbox() CALLED!"),console.log("\uD83D\uDDFA️ mapContainer.current exists:",!!ee.current),console.log("\uD83D\uDDFA️ Current mapLoaded state:",eh),!ee.current)return void console.log("❌ No map container - aborting");if(console.log("\uD83D\uDDFA️ Initializing Mapbox (non-blocking) - v2.0"),console.log("\uD83D\uDDFA️ Map container ref:",!!ee.current),console.log("\uD83D\uDDFA️ Map container element:",null==(e=ee.current)?void 0:e.tagName),es.current){try{es.current.destroy()}catch(e){console.log("\uD83D\uDDFA️ MAP CLEANUP: Error destroying event markers manager:",e)}es.current=null}if(et.current){try{if(et.current.getContainer&&"function"==typeof et.current.getContainer){let e=et.current.getContainer();e&&e.parentNode&&et.current.remove()}}catch(e){console.log("\uD83D\uDDFA️ MAP CLEANUP: Error removing map:",e)}et.current=null}let t=[-98.5795,39.8283],s=localStorage.getItem("userLocation");if(s)try{let e=JSON.parse(s);console.log("\uD83D\uDDFA️ DEBUG: Parsed stored location:",e),e.coordinates&&Array.isArray(e.coordinates)?t=e.coordinates:e.lng&&e.lat?t=[e.lng,e.lat]:e.longitude&&e.latitude&&(t=[e.longitude,e.latitude]),console.log("\uD83D\uDDFA️ INSTANT LOAD: Using stored location:",t)}catch(e){console.log("\uD83D\uDDFA️ INSTANT LOAD: Could not parse stored location, using default")}R&&R.coordinates&&Array.isArray(R.coordinates)&&(console.log("\uD83D\uDDFA️ DEBUG: Current userLocation:",R),t=R.coordinates,console.log("\uD83D\uDDFA️ INSTANT LOAD: Using current user location:",t)),et.current=await (0,g.kk)(ee.current,t,{zoom:13,style:"mapbox://styles/mapbox/streets-v12",attributionControl:!1,interactive:!0}),es.current=new g.ff(et.current);try{if(await es.current.initializeLayers(),console.log("✅ Event markers manager initialized successfully - v3.0 CACHE BREAK"),console.log("\uD83D\uDDFA️ DISCOVER: Using proven Marker API approach from working event details page"),R&&R.coordinates&&Array.isArray(R.coordinates)&&R.coordinates.length>=2){let e=(0,g.RT)({id:"user",title:"Your Location",longitude:R.coordinates[0],latitude:R.coordinates[1]});e&&(es.current.addUserLocationMarker(e),console.log("✅ User location marker added at:",R.coordinates))}else console.log("\uD83D\uDDFA️ No valid user location for marker. UserLocation:",R),console.log("\uD83D\uDDFA️ Will add marker when location becomes available");eI()}catch(e){console.warn("\uD83D\uDDFA️ Event markers initialization failed:",e)}ep(!0),console.log("✅ Map initialization complete (non-blocking)"),console.log("\uD83D\uDDFA️ Map object created successfully:",!!et.current),console.log("\uD83D\uDDFA️ Map container element exists:",!!ee.current);let n=()=>(()=>{if(et.current&&R&&(console.log("\uD83D\uDDFA️ BACKGROUND UPDATE: Adding user location marker to existing map"),!es.current&&R&&(es.current=new g.ff(et.current),es.current.initializeLayers().then(()=>{eI()})),es.current&&R&&R.coordinates&&Array.isArray(R.coordinates)&&R.coordinates.length>=2)){let e=(0,g.RT)({id:"user-fresh",title:"Your Current Location",longitude:R.coordinates[0],latitude:R.coordinates[1]});e&&(es.current.addUserLocationMarker(e),console.log("✅ User location marker added (background update)"))}})();return window.addEventListener("userLocationUpdated",n),()=>{window.removeEventListener("userLocationUpdated",n)}}catch(e){if(console.error("❌ Error loading Mapbox:",e),ee.current){let t=e instanceof Error?e.message:String(e),s=t.includes("rate")||t.includes("429")||t.includes("quota")||t.includes("blocked");ee.current.innerHTML='\n          <div class="w-full h-full flex items-center justify-center bg-slate-50 border-2 border-dashed border-slate-300 rounded-lg">\n            <div class="text-center p-6">\n              <div class="text-4xl mb-3">\uD83D\uDDFA️</div>\n              <h3 class="text-lg font-semibold text-slate-800 mb-2">\n                '.concat(s?"Map temporarily unavailable":"Map failed to load",'\n              </h3>\n              <p class="text-sm text-slate-600 mb-4">\n                ').concat(s?"We've hit our map usage limit. Events are still available below!":"Unable to load the interactive map. Events are still available below!",'\n              </p>\n              <button \n                onclick="window.location.reload()" \n                class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm"\n              >\n                Try Again\n              </button>\n            </div>\n          </div>\n        ')}ep(!0)}},eM=(0,a.useRef)([]),eI=()=>{if(!es.current||!eh)return;console.log("\uD83D\uDDFA️ OPTIMIZED MAP: Updating event markers..."),console.log("\uD83D\uDDFA️ OPTIMIZED MAP: Map loaded:",eh),console.log("\uD83D\uDDFA️ OPTIMIZED MAP: All discoverable events:",K.length),console.log("\uD83D\uDDFA️ OPTIMIZED MAP: Filtered events:",eC().length),console.log("\uD83D\uDDFA️ OPTIMIZED MAP: Sample event coordinates:",K.slice(0,3).map(e=>({id:e.id,title:e.title,latitude:e.latitude,longitude:e.longitude,coordinates:e.coordinates,eventType:e.eventType,isPrivate:e.isPrivate,normalizedCoords:(0,g.RT)(e)})));let e=eC();console.log("\uD83C\uDFAF Events being sent to markers:",e.length),console.log("\uD83C\uDFAF First event details:",e[0]?{id:e[0].id,title:e[0].title,latitude:e[0].latitude,longitude:e[0].longitude,eventType:e[0].eventType,isPrivate:e[0].isPrivate}:"No events"),eM.current.forEach(e=>{var t,s;(null==(t=et.current)?void 0:t.getLayer(e))&&et.current.removeLayer(e),(null==(s=et.current)?void 0:s.getSource(e))&&et.current.removeSource(e)}),eM.current=[];try{let e=eC(),t=e.map(e=>({...e,eventType:(()=>{let t=er.find(t=>t.id===e.id),s=el.find(t=>t.id===e.id),n=ec.find(t=>t.id===e.id);return t?"journey":s?"maybe":n?"notify":eu.includes(e.id)?"skipped":e.eventType||"public"})(),isPrivate:e.isPrivate}));if(console.log("\uD83D\uDD0D EVENTS PAGE DEBUG: About to call updateEvents"),console.log("\uD83D\uDD0D EVENTS PAGE DEBUG: eventMarkersManager.current exists:",!!es.current),console.log("\uD83D\uDD0D EVENTS PAGE DEBUG: eventsWithStatus length:",t.length),console.log("\uD83D\uDD0D EVENTS PAGE DEBUG: First event with status:",t[0]),es.current){console.log("\uD83D\uDD0D EVENTS PAGE DEBUG: Calling updateEvents on manager");try{es.current.updateEvents(t),console.log("\uD83D\uDD0D EVENTS PAGE DEBUG: updateEvents call completed successfully"),console.log("\uD83D\uDDFA️ DISCOVER: Creating custom map pin markers with category emojis");let e={social:{emoji:"\uD83C\uDF89",color:"#ff6b6b"},food:{emoji:"\uD83C\uDF55",color:"#ff8c42"},entertainment:{emoji:"\uD83C\uDFAD",color:"#9b59b6"},sports:{emoji:"\uD83C\uDFC3",color:"#2ecc71"},tech:{emoji:"\uD83D\uDCBB",color:"#3498db"},professional:{emoji:"\uD83D\uDCBC",color:"#34495e"},arts:{emoji:"\uD83C\uDFA8",color:"#e74c3c"},education:{emoji:"\uD83D\uDCDA",color:"#f39c12"},wellness:{emoji:"\uD83E\uDDD8",color:"#1abc9c"},community:{emoji:"\uD83E\uDD1D",color:"#9b59b6"},adventure:{emoji:"\uD83C\uDFD4️",color:"#27ae60"},hobby:{emoji:"\uD83C\uDFAF",color:"#e67e22"},default:{emoji:"\uD83D\uDCCD",color:"#95a5a6"}};window.eventMarkers&&window.eventMarkers.forEach(e=>e.remove()),window.eventMarkers=[];let s=0;console.log("\uD83D\uDDFA️ DISCOVER: Starting marker creation for",t.length,"events"),console.log("\uD83D\uDDFA️ DISCOVER: Map instance:",et.current?"Available":"Missing"),console.log("\uD83D\uDDFA️ DISCOVER: Mapbox GL loaded:",void 0!==p()?"Yes":"No"),t.forEach((t,n)=>{let a=parseFloat(t.latitude),r=parseFloat(t.longitude);if(isNaN(a)||isNaN(r))console.log('⚠️ DISCOVER: Skipping event "'.concat(t.title,'" - invalid coordinates:'),{lat:t.latitude,lng:t.longitude});else{console.log('\uD83C\uDFAF DISCOVER: Creating custom pin for "'.concat(t.title,'" (').concat(t.category,") at [").concat(r,", ").concat(a,"]"));let n=e[t.category]||e.default;console.log('\uD83C\uDFAF DISCOVER: Category "'.concat(t.category,'" → Emoji: ').concat(n.emoji,", Color: ").concat(n.color)),t.category&&!e[t.category]&&console.warn('⚠️ DISCOVER: Unknown category "'.concat(t.category,'" - using default pin emoji'));let o=document.createElement("div");if(o.className="custom-map-pin",o.setAttribute("data-event-title",t.title),o.setAttribute("data-event-category",t.category),o.setAttribute("data-category-emoji",n.emoji),o.innerHTML='\n                <div class="pin-container">\n                  <div class="pin-head" style="background-color: '.concat(n.color,'">\n                    <span class="pin-emoji">').concat(n.emoji,'</span>\n                  </div>\n                  <div class="pin-shadow"></div>\n                </div>\n              '),console.log('\uD83D\uDD0D DISCOVER: Created marker HTML for "'.concat(t.title,'":'),o.outerHTML),!document.getElementById("custom-pin-styles")){let e=document.createElement("style");e.id="custom-pin-styles",e.textContent="\n                  .custom-map-pin {\n                    position: relative;\n                    cursor: pointer;\n                    /* Ensure proper positioning for Mapbox custom markers */\n                    display: block;\n                    border: none;\n                    border-radius: 0;\n                    padding: 0;\n                    text-align: center;\n                  }\n                  \n                  .pin-container {\n                    position: relative;\n                    width: 40px;\n                    height: 50px;\n                  }\n                  \n                  .pin-head {\n                    width: 32px;\n                    height: 32px;\n                    border-radius: 50% 50% 50% 0;\n                    transform: rotate(-45deg);\n                    position: absolute;\n                    top: 0;\n                    left: 4px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    border: 3px solid white;\n                    box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n                    transition: all 0.2s ease;\n                  }\n                  \n                  .pin-emoji {\n                    font-size: 18px;\n                    transform: rotate(45deg);\n                    display: block;\n                    line-height: 1;\n                    text-align: center;\n                    width: 100%;\n                    height: 100%;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    font-weight: bold;\n                    text-shadow: 0 1px 2px rgba(0,0,0,0.3);\n                  }\n                  \n                  .pin-shadow {\n                    position: absolute;\n                    bottom: -2px;\n                    left: 50%;\n                    transform: translateX(-50%);\n                    width: 12px;\n                    height: 6px;\n                    background: rgba(0,0,0,0.2);\n                    border-radius: 50%;\n                    filter: blur(2px);\n                  }\n                  \n                  .custom-map-pin:hover .pin-head {\n                    transform: rotate(-45deg) scale(1.1);\n                    box-shadow: 0 4px 12px rgba(0,0,0,0.4);\n                  }\n                  \n                  .custom-map-pin:hover .pin-shadow {\n                    width: 16px;\n                    height: 8px;\n                  }\n                ",document.head.appendChild(e)}let l=new(p()).Marker({element:o,anchor:"bottom",offset:[0,0],draggable:!1}).setLngLat([r,a]);l.addTo(et.current),console.log('✅ DISCOVER: Marker added successfully for "'.concat(t.title,'" at [').concat(r,", ").concat(a,"]"));let i=new(p()).Popup({offset:[0,-50],closeButton:!0,closeOnClick:!0}).setHTML('\n                  <div class="p-4 min-w-[250px]">\n                    <div class="flex items-center gap-2 mb-2">\n                      <span class="text-lg">'.concat(n.emoji,'</span>\n                      <h3 class="font-semibold text-slate-800">').concat(t.title,'</h3>\n                    </div>\n                    <p class="text-sm text-slate-600 mb-1">').concat(t.category,'</p>\n                    <p class="text-xs text-slate-500 mb-3">').concat(t.description,'</p>\n                    <div class="flex gap-2">\n                      <button onclick="window.location.href=\'/events/').concat(t.id,'\'" \n                              class="flex-1 px-3 py-2 bg-cyan-500 text-white text-sm rounded-md hover:bg-cyan-600 transition-colors">\n                        View Details\n                      </button>\n                    </div>\n                  </div>\n                '));if(l.setPopup(i),window.eventMarkers.push(l),s++,1===s){console.log("\uD83D\uDD27 DEBUG: Adding test marker with basic emoji");let e=document.createElement("div");e.innerHTML="\uD83C\uDF89",e.style.fontSize="24px",e.style.background="white",e.style.borderRadius="50%",e.style.padding="4px",e.style.border="2px solid red";let t=new(p()).Marker({element:e,anchor:"center"}).setLngLat([r+.002,a+.002]).addTo(et.current);window.eventMarkers.push(t),console.log("\uD83D\uDD27 DEBUG: Test emoji marker added successfully")}}}),console.log("✅ DISCOVER: Successfully added ".concat(s," custom category pin markers")),setTimeout(()=>{if(console.log("\uD83C\uDFAF DIRECT FIX: Forcing map repaint and visibility check"),et.current){et.current.triggerRepaint();let e=et.current.getStyle();if(e&&e.layers){console.log("\uD83D\uDD0D All map layers:",e.layers.map(e=>{var t;return{id:e.id,type:e.type,visible:(null==(t=e.layout)?void 0:t.visibility)!=="none"}}));let t=e.layers.filter(e=>e.id.includes("events")||e.id.includes("cluster"));console.log("\uD83C\uDFAF Event-related layers found:",t.map(e=>e.id)),t.forEach(e=>{let t=et.current.getLayoutProperty(e.id,"visibility");console.log("\uD83D\uDD0D Layer ".concat(e.id," visibility:"),t),"visible"!==t&&(et.current.setLayoutProperty(e.id,"visibility","visible"),console.log("✅ Forced ".concat(e.id," to visible")))})}let t=Object.keys(et.current.getStyle().sources||{});console.log("\uD83D\uDD0D All map sources:",t);let s=t.filter(e=>e.includes("events"));console.log("\uD83C\uDFAF Event-related sources:",s),et.current.isStyleLoaded()?(console.log("✅ Style loaded, markers should be visible"),s.forEach(e=>{let t=et.current.getSource(e);t&&"geojson"===t.type&&console.log("\uD83D\uDD0D Source ".concat(e," data:"),t._data)})):console.log("\uD83D\uDD04 Style not loaded, waiting...")}},500)}catch(e){console.error("\uD83D\uDD0D EVENTS PAGE DEBUG: updateEvents threw error:",e)}}else console.error("\uD83D\uDD0D EVENTS PAGE DEBUG: eventMarkersManager.current is null/undefined!");er.length>1&&eT(),console.log("✅ Updated ".concat(e.length," events on optimized map"))}catch(e){console.error("❌ Error updating event markers:",e)}},eT=async()=>{if(et.current&&!(er.length<2))try{for(let e=0;e<er.length-1;e++){let t=er[e],s=er[e+1],n=t.coordinates?[t.coordinates[0],t.coordinates[1]]:[t.longitude,t.latitude],a=s.coordinates?[s.coordinates[0],s.coordinates[1]]:[s.longitude,s.latitude],r=await fetch("https://api.mapbox.com/directions/v5/mapbox/driving/".concat(n[0],",").concat(n[1],";").concat(a[0],",").concat(a[1],"?geometries=geojson&access_token=pk.eyJ1IjoidHJlZW1vbmtleTQ1NiIsImEiOiJjbWMwc3FodnIwNjJ6MmxwdWtpamFkbjVyIn0._yMY5crJh7ujrwoxkm3EVw")),o=await r.json();if(o.routes&&o.routes[0]){let t=o.routes[0],s="route-".concat(e);et.current.addSource(s,{type:"geojson",data:{type:"Feature",properties:{},geometry:t.geometry}}),et.current.addLayer({id:s,type:"line",source:s,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3b82f6","line-width":3,"line-opacity":.7}}),eM.current.push(s)}}}catch(e){console.error("Error adding journey routes:",e)}},eP=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"driving";if(et.current&&!(er.length<2))try{let s=er.map(e=>{let t=e.coordinates?[e.coordinates[0],e.coordinates[1]]:[e.longitude,e.latitude];return"".concat(t[0],",").concat(t[1])}).join(";"),n=await fetch("https://api.mapbox.com/directions/v5/mapbox/".concat(e,"/").concat(s,"?geometries=geojson&overview=full&steps=true&voice_instructions=true&banner_instructions=true&access_token=pk.eyJ1IjoidHJlZW1vbmtleTQ1NiIsImEiOiJjbWMwc3FodnIwNjJ6MmxwdWtpamFkbjVyIn0._yMY5crJh7ujrwoxkm3EVw")),a=await n.json();if(a.routes&&a.routes[0]){var t;let s=a.routes[0];eM.current.forEach(e=>{var t,s;(null==(t=et.current)?void 0:t.getLayer(e))&&et.current.removeLayer(e),(null==(s=et.current)?void 0:s.getSource(e))&&et.current.removeSource(e)}),eM.current=[];let n="optimized-route";return et.current.addSource(n,{type:"geojson",data:{type:"Feature",properties:{duration:s.duration,distance:s.distance},geometry:s.geometry}}),et.current.addLayer({id:n,type:"line",source:n,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"walking"===e?"#22c55e":"cycling"===e?"#f59e0b":"driving-traffic"===e?"#ef4444":"#3b82f6","line-width":4,"line-opacity":.8}}),eM.current.push(n),{duration:Math.round(s.duration/60),distance:Math.round(s.distance/1e3*10)/10,steps:(null==(t=s.legs)?void 0:t.map(e=>e.steps).flat())||[]}}}catch(e){console.error("Error adding advanced routes:",e)}},eL=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[15,30,45],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"driving";if(et.current&&C)try{let s="".concat(C.coordinates[0],",").concat(C.coordinates[1]);for(let n of e){let e=await fetch("https://api.mapbox.com/isochrone/v1/mapbox/".concat(t,"/").concat(s,"?contours_minutes=").concat(n,"&polygons=true&access_token=pk.eyJ1IjoidHJlZW1vbmtleTQ1NiIsImEiOiJjbWMwc3FodnIwNjJ6MmxwdWtpamFkbjVyIn0._yMY5crJh7ujrwoxkm3EVw")),a=await e.json();if(a.features&&a.features[0]){let e="isochrone-".concat(n);et.current.addSource(e,{type:"geojson",data:a.features[0]}),et.current.addLayer({id:e,type:"fill",source:e,paint:{"fill-color":15===n?"#22c55e":30===n?"#f59e0b":"#ef4444","fill-opacity":.1}}),et.current.addLayer({id:"".concat(e,"-outline"),type:"line",source:e,paint:{"line-color":15===n?"#22c55e":30===n?"#f59e0b":"#ef4444","line-width":2,"line-opacity":.8}}),eM.current.push(e,"".concat(e,"-outline"))}}}catch(e){console.error("Error adding isochrones:",e)}},eO=async()=>{if(et.current&&0!==K.length&&R)try{let e=["".concat(R.coordinates[0],",").concat(R.coordinates[1]),...K.slice(0,24).map(e=>{var t,s;return"".concat((null==(t=e.coordinates)?void 0:t[0])||R.coordinates[0],",").concat((null==(s=e.coordinates)?void 0:s[1])||R.coordinates[1])})].join(";"),t=await fetch("https://api.mapbox.com/directions-matrix/v1/mapbox/driving/".concat(e,"?access_token=pk.eyJ1IjoidHJlZW1vbmtleTQ1NiIsImEiOiJjbWMwc3FodnIwNjJ6MmxwdWtpamFkbjVyIn0._yMY5crJh7ujrwoxkm3EVw")),s=await t.json();if(s.durations&&s.distances)return K.map((e,t)=>({...e,actualTravelTime:s.durations[0][t+1]?Math.round(s.durations[0][t+1]/60):null,actualDistance:s.distances[0][t+1]?Math.round(s.distances[0][t+1]/1e3*10)/10:null}))}catch(e){console.error("Error calculating travel matrix:",e)}},eF=e=>{let t=eC()[en];switch(eg(t=>({...t,viewed:t.viewed+1,..."like"===e&&{liked:t.liked+1},..."maybe"===e&&{maybe:t.maybe+1},..."notify"===e&&{notify:t.notify+1}})),e){case"skip":em(e=>[...e,t.id]);break;case"like":eo(e=>[...e,{...t,status:"confirmed"}]);break;case"maybe":ei(e=>[...e,t]),eo(e=>[...e,{...t,status:"maybe"}]);break;case"notify":ed(e=>[...e,t])}en<eC().length-1?ea(en+1):ea(0)},eU=()=>{let e=er.reduce((e,t)=>e+t.journeyTiming,0),t=er.reduce((e,t)=>e+t.price,0);return{totalTime:e,totalCost:t,totalDistance:2.5*(er.length>1),avgTrust:er.length>0?er.reduce((e,t)=>e+t.trustScore,0)/er.length:0}},eV=e=>{try{let[t,s]=e.split(" "),[n,a]=t.split(":").map(Number),r=60*n+(a||0);return(null==s?void 0:s.toLowerCase())==="pm"&&12!==n?r+=720:(null==s?void 0:s.toLowerCase())==="am"&&12===n&&(r=a||0),r}catch(e){return null}},eR=async e=>{let t=eU(),s="\uD83C\uDFAF Check out my Phoenix journey! ".concat(er.length," events, ").concat(Math.round(t.totalTime/60),"h duration, $").concat(t.totalCost," total. Join me! \uD83D\uDE80");switch(e){case"copy":await navigator.clipboard.writeText(s),alert("Journey copied to clipboard!");break;case"social":navigator.share&&await navigator.share({title:"My Phoenix Journey",text:s});break;case"link":window.open("mailto:?subject=Join my Phoenix journey!&body=".concat(encodeURIComponent(s)),"_blank")}eN(!1)},eJ=e=>{if(eo(e.events||[]),M("discover"),e.events&&e.events.length>0){var t;let s=e.events[0];null==(t=et.current)||t.flyTo({center:s.coordinates,zoom:13})}},eB=e=>{switch(e){case"tech":return"\uD83D\uDCBB";case"social":return"\uD83C\uDF89";case"professional":return"\uD83D\uDCBC";case"adventure":return"\uD83E\uDD7E";case"arts":return"\uD83C\uDFA8";case"food":return"\uD83C\uDF55";case"entertainment":return"\uD83C\uDFAD";case"sports":return"\uD83C\uDFC3";case"education":return"\uD83D\uDCDA";case"wellness":return"\uD83E\uDDD8";case"community":return"\uD83E\uDD1D";case"hobby":return"\uD83C\uDFAF";default:return"\uD83D\uDCCD"}},eG=function(e){var t;let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=m.vx.find(t=>t.id===e.hostId);if(!a&&o&&String(e.hostId)===String(o.id)&&(a={id:Number(o.id)||0,name:o.name||"Current User",username:o.username||"user",avatar:"https://ui-avatars.com/api/?name="+encodeURIComponent(o.name||"User")+"&background=06b6d4&color=fff",isVerified:!1}),a||(a={id:Number(e.hostId)||0,name:"Event Host",username:"host",avatar:"https://ui-avatars.com/api/?name=Host&background=64748b&color=fff",isVerified:!1}),!a)return console.warn("No host found for event:",e.id),null;let i=e.maxAttendees-e.attendeeCount;return(0,n.jsxs)("div",{className:"card-soft hover:shadow-lg transition-shadow duration-200",children:[(0,n.jsxs)("div",{className:"relative mb-4 -mx-6 -mt-6",children:[e.imageUrl||e.image?(0,n.jsx)(r.default,{src:e.imageUrl||e.image,alt:e.title,width:400,height:200,className:"w-full h-48 object-cover rounded-t-2xl ".concat(s?"grayscale opacity-75":"")}):(0,n.jsx)("div",{className:"w-full h-48 bg-gradient-to-br from-cyan-100 to-teal-200 rounded-t-2xl flex items-center justify-center ".concat(s?"grayscale opacity-75":""),children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-4xl mb-2",children:eB(e.category)}),(0,n.jsx)("div",{className:"text-sm font-medium text-slate-600",children:e.category})]})}),(0,n.jsxs)("div",{className:"absolute top-4 left-4 flex flex-col space-y-2",children:[e.isPrivate?(0,n.jsxs)("div",{className:"bg-slate-800/80 backdrop-blur-sm text-white px-3 py-1 rounded-full flex items-center space-x-1",children:[(0,n.jsx)(v.A,{className:"w-4 h-4"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"Private"})]}):(0,n.jsxs)("div",{className:"bg-cyan-500/80 backdrop-blur-sm text-white px-3 py-1 rounded-full flex items-center space-x-1",children:[(0,n.jsx)(b.A,{className:"w-4 h-4"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"Public"})]}),(0,n.jsx)("div",{className:"bg-teal-500/80 backdrop-blur-sm text-white px-3 py-1 rounded-full",children:(0,n.jsx)("span",{className:"text-sm font-medium",children:e.category})})]}),(0,n.jsx)("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full",children:(0,n.jsx)("span",{className:"text-sm font-semibold text-slate-800",children:0===e.price?"Free":"$".concat(e.price)})})]}),(0,n.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(r.default,{src:a.avatar,alt:a.name,width:40,height:40,className:"rounded-full"}),(0,n.jsxs)("div",{children:[(0,n.jsx)(l(),{href:"/user/".concat(a.id),className:"font-medium text-slate-800 hover:text-cyan-600",children:a.name}),(0,n.jsx)("p",{className:"text-sm text-slate-500",children:"hosting"})]})]}),(0,n.jsx)(d.A,{score:a.trustScore,size:"sm"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h4",{className:"text-lg font-semibold text-slate-800 mb-2",children:e.title}),(0,n.jsx)("p",{className:"text-slate-600 mb-3 line-clamp-2",children:e.description}),(0,n.jsxs)("div",{className:"space-y-2 text-sm text-slate-600",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(f.A,{className:"w-4 h-4 text-cyan-500"}),(0,n.jsxs)("span",{children:[e.date," at ",e.time]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(y.A,{className:"w-4 h-4 text-cyan-500"}),(0,n.jsx)("span",{children:e.location})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(j.A,{className:"w-4 h-4 text-cyan-500"}),(0,n.jsxs)("span",{children:[e.attendeeCount||0," attending",!s&&i>0&&" • ".concat(i," spots left")]})]})]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:null==(t=e.tags)?void 0:t.map(e=>(0,n.jsxs)("span",{className:"text-xs px-2 py-1 bg-cyan-50 text-cyan-600 rounded-full",children:["#",e]},e))})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(l(),{href:"/events/".concat(e.id),className:"flex-1 btn-primary text-center py-2",children:s?"Review":"View & RSVP"}),(0,n.jsx)("button",{onClick:t=>{var s;t.preventDefault(),t.stopPropagation(),s=e.id.toString(),T(e=>({...e,[s]:!e[s]}))},className:"p-2 rounded-xl hover:bg-slate-100 transition-colors duration-200",children:I[e.id]?(0,n.jsx)(k.A,{className:"w-5 h-5 text-red-500"}):(0,n.jsx)(N.A,{className:"w-5 h-5 text-slate-500"})}),(0,n.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),X({isOpen:!0,contentType:"event",contentId:e.id.toString(),contentTitle:e.title})},className:"p-2 rounded-xl hover:bg-orange-100 transition-colors duration-200",children:(0,n.jsx)(w.A,{className:"w-5 h-5 text-orange-500"})})]})]},e.id)};console.log("\uD83D\uDD0D EVENTS PAGE: All events:",P),console.log("\uD83D\uDD0D EVENTS PAGE: Event dates and isPast:",P.map(e=>({id:e.id,title:e.title,date:e.date,isPast:e.isPast,hostId:e.hostId})));let eH=new Date,ez=P.filter(e=>{let t=new Date(e.event_date||e.date),s=t<eH;return console.log("\uD83D\uDD0D EVENT DATE CHECK:",{id:e.id,title:e.title,eventDate:t.toISOString(),now:eH.toISOString(),isPastByDate:s,originalIsPast:e.isPast}),!s});console.log("\uD83D\uDD0D EVENTS PAGE: Upcoming events after filter:",ez);let eW=P.filter(e=>new Date(e.event_date||e.date)<eH);return(0,n.jsxs)(c.default,{children:[(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Events"}),(0,n.jsx)("p",{className:"text-slate-600",children:"Discover and join amazing events in your community"})]}),(0,n.jsxs)(l(),{href:"/my-events",className:"btn-primary bg-gradient-to-r from-cyan-500 to-teal-600 hover:from-cyan-600 hover:to-teal-700 text-white py-2 px-4 rounded-xl flex items-center space-x-2",children:[(0,n.jsx)(f.A,{className:"w-5 h-5"}),(0,n.jsx)("span",{children:"My Events"})]})]}),(0,n.jsx)("div",{className:"flex space-x-1 mb-6 bg-slate-100 p-1 rounded-xl",children:[{key:"upcoming",label:"Upcoming",count:ez.length},{key:"past",label:"Past",count:eW.length},{key:"discover",label:"Discover",count:eC().length}].map(e=>(0,n.jsxs)("button",{onClick:()=>{console.log("\uD83D\uDDFA️ TAB CLICKED:",e.key,{currentMapLoaded:eh,hasMapContainer:!!ee.current,hasMap:!!et.current}),M(e.key),"discover"===e.key&&(console.log("\uD83D\uDDFA️ DISCOVER TAB CLICKED - calling initializeMapbox()"),eA())},className:"flex-1 py-3 px-4 rounded-lg text-sm font-medium transition-all duration-200 ".concat(A===e.key?"bg-white text-cyan-600 shadow-soft":"text-slate-600 hover:text-slate-800"),children:[e.label," (",e.count,")"]},e.key))}),(0,n.jsxs)("div",{className:"space-y-4",children:["upcoming"===A&&(0,n.jsx)(n.Fragment,{children:ez.length>0?ez.map(e=>eG(e)):(0,n.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)(f.A,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-medium text-slate-800 mb-2",children:"No upcoming events"}),(0,n.jsx)("p",{className:"text-slate-500 mb-6",children:"Stay active in your community. Here's how events work on our platform:"})]}),(0,n.jsxs)("div",{className:"grid gap-4",children:[(0,n.jsxs)("div",{className:"p-4 rounded-xl bg-blue-50 border border-blue-200",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,n.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF89"}),(0,n.jsx)("h4",{className:"font-semibold text-slate-800",children:"Create Events"})]}),(0,n.jsx)("p",{className:"text-sm text-slate-600 ml-11",children:"Host gatherings, meetups, or activities. Choose public, friends-only, or private visibility"})]}),(0,n.jsxs)("div",{className:"p-4 rounded-xl bg-green-50 border border-green-200",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,n.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD1D"}),(0,n.jsx)("h4",{className:"font-semibold text-slate-800",children:"RSVP & Connect"})]}),(0,n.jsx)("p",{className:"text-sm text-slate-600 ml-11",children:"Join events, meet new people, and build your local network through shared activities"})]}),(0,n.jsxs)("div",{className:"p-4 rounded-xl bg-purple-50 border border-purple-200",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,n.jsx)("span",{className:"text-2xl",children:"\uD83D\uDDFA️"}),(0,n.jsx)("h4",{className:"font-semibold text-slate-800",children:"Discover Nearby"})]}),(0,n.jsx)("p",{className:"text-sm text-slate-600 ml-11",children:"Use the Discover tab to find events happening around you with interactive maps"})]})]}),(0,n.jsx)("div",{className:"text-center mt-6",children:(0,n.jsxs)("div",{className:"flex flex-wrap justify-center gap-2",children:[(0,n.jsx)(l(),{href:"/create-event",className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"\uD83C\uDFA8 Create Event"}),(0,n.jsx)("button",{onClick:()=>M("discover"),className:"px-6 py-3 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 transition-colors",children:"\uD83D\uDD0D Discover Events"})]})})]})})}),"past"===A&&(0,n.jsx)(n.Fragment,{children:eW.length>0?(0,n.jsx)("div",{className:"space-y-8",children:eW.map(e=>eG(e,!0))}):(0,n.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)(D.A,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-medium text-slate-800 mb-2",children:"No past events"}),(0,n.jsx)("p",{className:"text-slate-500 mb-6",children:"Your event history will build up as you participate. Here's what you'll see:"})]}),(0,n.jsxs)("div",{className:"grid gap-4",children:[(0,n.jsxs)("div",{className:"p-4 rounded-xl bg-blue-50 border border-blue-200",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,n.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC5"}),(0,n.jsx)("h4",{className:"font-semibold text-slate-800",children:"Event History"})]}),(0,n.jsx)("p",{className:"text-sm text-slate-600 ml-11",children:"All events you've attended, hosted, or participated in will appear here for reference"})]}),(0,n.jsxs)("div",{className:"p-4 rounded-xl bg-green-50 border border-green-200",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,n.jsx)("span",{className:"text-2xl",children:"⭐"}),(0,n.jsx)("h4",{className:"font-semibold text-slate-800",children:"Reviews & Memories"})]}),(0,n.jsx)("p",{className:"text-sm text-slate-600 ml-11",children:"Leave reviews, share photos, and reminisce about great events you've experienced"})]}),(0,n.jsxs)("div",{className:"p-4 rounded-xl bg-purple-50 border border-purple-200",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,n.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD04"}),(0,n.jsx)("h4",{className:"font-semibold text-slate-800",children:"Repeat Events"})]}),(0,n.jsx)("p",{className:"text-sm text-slate-600 ml-11",children:"Easily recreate successful events or find similar ones happening again"})]})]}),(0,n.jsx)("div",{className:"text-center mt-6",children:(0,n.jsxs)("div",{className:"flex flex-wrap justify-center gap-2",children:[(0,n.jsx)("button",{onClick:()=>M("upcoming"),className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"\uD83D\uDCCB View Upcoming"}),(0,n.jsx)("button",{onClick:()=>M("discover"),className:"px-6 py-3 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 transition-colors",children:"\uD83D\uDD0D Discover Events"})]})})]})})}),"discover"===A&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"\uD83D\uDDFA️ Discover Events"}),"pending"===B&&(0,n.jsx)("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full animate-pulse",children:"\uD83D\uDD0D Finding your location..."}),"granted"===B&&R&&(0,n.jsx)("span",{className:"text-xs bg-green-100 text-green-600 px-2 py-1 rounded-full",children:"\uD83D\uDCCD Events around you"}),"denied"===B&&(0,n.jsx)("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded-full",children:"\uD83D\uDCCD Location needed to show events"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[er.length>0&&(0,n.jsx)("button",{onClick:()=>eN(!0),className:"px-3 py-1 text-sm bg-green-100 text-green-600 hover:bg-green-200 rounded-full transition-colors",children:"\uD83D\uDCE4 Share Journey"}),(0,n.jsx)("button",{onClick:()=>eb(!ev),className:"px-3 py-1 text-sm bg-slate-100 text-slate-600 hover:bg-slate-200 rounded-full transition-colors",children:"\uD83D\uDD3D Filters"})]})]}),er.length>1&&(()=>{let e=(()=>{let e=[];for(let t=0;t<er.length-1;t++){let s=er[t],n=er[t+1],a=eV(s.time),r=eV(n.time),o=s.journeyTiming;a&&r&&r<a+o+15&&e.push("".concat(s.title," → ").concat(n.title))}return e})();return e.length>0&&(0,n.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,n.jsx)("span",{className:"text-red-600",children:"⚠️"}),(0,n.jsx)("span",{className:"font-medium text-red-800",children:"Time Conflicts Detected"})]}),(0,n.jsx)("div",{className:"space-y-1",children:e.map((e,t)=>(0,n.jsxs)("div",{className:"text-sm text-red-700",children:["\uD83D\uDD34 ",e]},t))}),(0,n.jsx)("div",{className:"text-xs text-red-600 mt-2",children:"\uD83D\uDCA1 Consider adjusting your journey or allowing more travel time"})]})})()]}),!R&&"denied"===B&&(0,n.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("span",{className:"text-blue-600 text-2xl",children:"\uD83D\uDCCD"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-medium text-blue-800",children:"Location Needed"}),(0,n.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Please enable location access in your browser to discover events around you."}),(0,n.jsx)("button",{onClick:()=>window.location.reload(),className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 px-2 py-1 rounded mt-2 transition-colors",children:"\uD83D\uDD04 Try Again"})]})]})}),ev&&(0,n.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Distance"}),(0,n.jsx)("select",{value:eE.distance,onChange:e=>ek({...eE,distance:e.target.value}),className:"w-full p-2 border border-slate-200 rounded-lg text-sm",children:["2 miles","5 miles","10 miles","25 miles"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Category"}),(0,n.jsxs)("select",{value:Z,onChange:e=>{Y(e.target.value),ea(0)},className:"w-full p-2 border border-slate-200 rounded-lg text-sm",children:[(0,n.jsxs)("option",{value:"",children:["\uD83C\uDFAF All (",K.length,")"]}),(0,n.jsxs)("option",{value:"tech",children:["\uD83D\uDCBB Tech (",K.filter(e=>"tech"===e.category).length,")"]}),(0,n.jsxs)("option",{value:"social",children:["\uD83C\uDF89 Social (",K.filter(e=>"social"===e.category).length,")"]}),(0,n.jsxs)("option",{value:"arts",children:["\uD83C\uDFA8 Arts (",K.filter(e=>"arts"===e.category).length,")"]}),(0,n.jsxs)("option",{value:"adventure",children:["\uD83E\uDD7E Adventure (",K.filter(e=>"adventure"===e.category).length,")"]}),(0,n.jsxs)("option",{value:"food",children:["\uD83C\uDF55 Food (",K.filter(e=>"food"===e.category).length,")"]}),(0,n.jsxs)("option",{value:"sports",children:["\uD83C\uDFC3 Sports (",K.filter(e=>"sports"===e.category).length,")"]}),(0,n.jsxs)("option",{value:"professional",children:["\uD83D\uDCBC Professional (",K.filter(e=>"professional"===e.category).length,")"]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Time"}),(0,n.jsx)("select",{value:eE.time,onChange:e=>ek({...eE,time:e.target.value}),className:"w-full p-2 border border-slate-200 rounded-lg text-sm",children:["tonight","tomorrow","week","anytime"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Trust Level"}),(0,n.jsx)("select",{value:eE.trustLevel,onChange:e=>ek({...eE,trustLevel:e.target.value}),className:"w-full p-2 border border-slate-200 rounded-lg text-sm",children:["all","60+","75+","85+"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]})]}),(0,n.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[(0,n.jsx)("h4",{className:"text-sm font-semibold text-slate-700 mb-3",children:"\uD83D\uDDFA️ Advanced Map Features"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,n.jsx)("button",{onClick:()=>eL([15,30,45],"driving"),className:"p-2 text-xs bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg transition-colors",children:"\uD83D\uDE97 Travel Zones"}),(0,n.jsx)("button",{onClick:()=>eL([15,30,45],"walking"),className:"p-2 text-xs bg-green-50 hover:bg-green-100 text-green-600 rounded-lg transition-colors",children:"\uD83D\uDEB6 Walking Zones"}),(0,n.jsx)("button",{onClick:async()=>{await eO()},className:"p-2 text-xs bg-purple-50 hover:bg-purple-100 text-purple-600 rounded-lg transition-colors",children:"\uD83D\uDCCA Travel Times"}),(0,n.jsx)("button",{onClick:()=>{eM.current.forEach(e=>{var t,s;(null==(t=et.current)?void 0:t.getLayer(e))&&et.current.removeLayer(e),(null==(s=et.current)?void 0:s.getSource(e))&&et.current.removeSource(e)}),eM.current=[]},className:"p-2 text-xs bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-colors",children:"\uD83E\uDDF9 Clear Overlays"})]}),er.length>1&&(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-2",children:"Journey Transport Mode:"}),(0,n.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,n.jsx)("button",{onClick:()=>eP("driving"),className:"p-2 text-xs bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg transition-colors",children:"\uD83D\uDE97 Drive"}),(0,n.jsx)("button",{onClick:()=>eP("walking"),className:"p-2 text-xs bg-green-50 hover:bg-green-100 text-green-600 rounded-lg transition-colors",children:"\uD83D\uDEB6 Walk"}),(0,n.jsx)("button",{onClick:()=>eP("cycling"),className:"p-2 text-xs bg-yellow-50 hover:bg-yellow-100 text-yellow-600 rounded-lg transition-colors",children:"\uD83D\uDEB4 Bike"}),(0,n.jsx)("button",{onClick:()=>eP("driving-traffic"),className:"p-2 text-xs bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-colors",children:"\uD83D\uDEA6 Traffic"})]})]})]})]}),(0,n.jsx)("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:(0,n.jsx)("div",{className:"h-96 relative",children:R?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:ee,className:"w-full h-full"}),ef&&(0,n.jsx)("div",{className:"absolute top-4 left-4 bg-blue-500 text-white px-3 py-1 rounded-full text-sm",children:"\uD83D\uDD0D Explore Mode Active"})]}):(0,n.jsxs)("div",{className:"w-full h-full relative",children:[(0,n.jsx)("div",{ref:ee,className:"w-full h-full"}),(0,n.jsx)("div",{className:"absolute top-4 left-4 right-4 pointer-events-none",children:(0,n.jsx)("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-lg text-center",children:(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm",children:[(0,n.jsx)("span",{className:"text-orange-600",children:"\uD83D\uDCCD"}),(0,n.jsx)("span",{className:"font-medium text-slate-800",children:"Click anywhere on the map to set your location"})]})})})]})})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[(0,n.jsxs)("button",{onClick:()=>{eg(e=>({...e,viewed:0})),ea(0)},className:"bg-blue-50 hover:bg-blue-100 text-blue-600 py-2 px-3 rounded-lg text-sm transition-colors flex items-center justify-center space-x-1",children:[(0,n.jsx)("span",{children:"\uD83D\uDD04"}),(0,n.jsx)("span",{children:"Refresh"})]}),(0,n.jsxs)("button",{onClick:()=>{eo([]),ei([]),ed([]),em([]),eg({viewed:0,liked:0,maybe:0,notify:0}),ea(0)},className:"bg-red-50 hover:bg-red-100 text-red-600 py-2 px-3 rounded-lg text-sm transition-colors flex items-center justify-center space-x-1",children:[(0,n.jsx)("span",{children:"↩️"}),(0,n.jsx)("span",{children:"Restart"})]})]}),(0,n.jsxs)("h3",{className:"font-semibold text-slate-800 mb-4",children:["\uD83D\uDCCB Currently Viewing Event ",en+1," of ",eC().length,":"]}),eC()[en]&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsxs)("h4",{className:"font-semibold text-slate-800",children:[eB(eC()[en].category)," ",eC()[en].title]}),(0,n.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(eC()[en].isPrivate?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"),children:eC()[en].isPrivate?"\uD83D\uDD34 Private":"\uD83D\uDD35 Public"})]}),(0,n.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:eC()[en].description}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs text-center mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium text-slate-800",children:eC()[en].time}),(0,n.jsx)("div",{className:"text-slate-500",children:"Time"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-medium text-slate-800",children:["$",0===eC()[en].price?"Free":eC()[en].price]}),(0,n.jsx)("div",{className:"text-slate-500",children:"Cost"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-medium text-slate-800",children:["⭐ ",eC()[en].trustScore,"%"]}),(0,n.jsx)("div",{className:"text-slate-500",children:"Trust"})]})]}),(0,n.jsxs)("div",{className:"text-xs text-slate-500 mb-3",children:["\uD83D\uDCCD ",eC()[en].location," • ",eC()[en].distance,"mi away • \uD83D\uDC65 ",eC()[en].attendeeCount,"/",eC()[en].maxAttendees]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,n.jsx)("button",{onClick:()=>eF("skip"),className:"bg-slate-200 hover:bg-slate-300 text-slate-700 py-2 px-3 rounded-lg text-sm transition-colors",children:"Skip"}),(0,n.jsx)("button",{onClick:()=>eF("maybe"),className:"bg-yellow-100 hover:bg-yellow-200 text-yellow-700 py-2 px-3 rounded-lg text-sm transition-colors",children:"Maybe"}),(0,n.jsx)("button",{onClick:()=>eF("like"),className:"bg-red-100 hover:bg-red-200 text-red-700 py-2 px-3 rounded-lg text-sm transition-colors",children:"❤️"}),(0,n.jsx)("button",{onClick:()=>eF("notify"),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 py-2 px-3 rounded-lg text-sm transition-colors",children:"\uD83D\uDD14 Notify"})]})]}),(0,n.jsxs)("div",{className:"text-sm text-slate-500 text-center",children:[ex.viewed," viewed • ❤️ ",ex.liked," liked • ❓ ",ex.maybe," maybe • \uD83D\uDD14 ",ex.notify," notify"]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[(0,n.jsx)("h3",{className:"font-semibold text-slate-800 mb-4",children:"\uD83E\uDDF3 Journey Planner"}),0===er.length?(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"text-4xl mb-3",children:"\uD83C\uDFAF"}),(0,n.jsx)("h4",{className:"font-medium text-slate-800 mb-2",children:"Build Your Perfect Night"}),(0,n.jsx)("p",{className:"text-sm text-slate-600",children:"Add events from the discovery panel to create your optimized journey."})]}):(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"bg-slate-50 rounded-lg p-3",children:(0,n.jsx)("div",{className:"grid grid-cols-4 gap-2 text-xs text-center",children:(()=>{let e=eU();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-medium text-slate-800",children:[Math.round(e.totalTime/60),"h"]}),(0,n.jsx)("div",{className:"text-slate-500",children:"Duration"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-medium text-slate-800",children:["$",e.totalCost]}),(0,n.jsx)("div",{className:"text-slate-500",children:"Cost"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-medium text-slate-800",children:[e.totalDistance.toFixed(1),"mi"]}),(0,n.jsx)("div",{className:"text-slate-500",children:"Travel"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-medium text-slate-800",children:[Math.round(e.avgTrust),"%"]}),(0,n.jsx)("div",{className:"text-slate-500",children:"Trust"})]})]})})()})}),(0,n.jsx)("div",{className:"space-y-2",children:er.map((e,t)=>(0,n.jsxs)("div",{children:[t>0&&(0,n.jsx)("div",{className:"flex items-center justify-center py-2",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-slate-500",children:[(0,n.jsx)("div",{className:"w-px h-4 bg-slate-300"}),(0,n.jsxs)("select",{className:"bg-slate-100 border-0 rounded px-2 py-1 text-xs",children:[(0,n.jsx)("option",{children:"\uD83D\uDEB6 Walk (5 min)"}),(0,n.jsx)("option",{children:"\uD83D\uDE97 Drive (2 min)"}),(0,n.jsx)("option",{children:"\uD83D\uDE87 Metro (8 min)"})]}),(0,n.jsx)("div",{className:"w-px h-4 bg-slate-300"})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between bg-slate-50 rounded-lg p-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ".concat("maybe"===e.status?"bg-yellow-100 text-yellow-600":"bg-purple-100 text-purple-600"),children:"maybe"===e.status?"❓":t+1}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("h5",{className:"font-medium text-slate-800 text-sm",children:e.title}),"maybe"===e.status&&(0,n.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-600 px-2 py-0.5 rounded-full",children:"Maybe"})]}),(0,n.jsxs)("p",{className:"text-xs text-slate-500",children:[e.time," • ",e.journeyTiming,"min • ",eB(e.category)]})]})]}),(0,n.jsx)("button",{onClick:()=>{var t;return t=e.id.toString(),void eo(e=>e.filter(e=>e.id!==t))},className:"text-slate-400 hover:text-red-500 transition-colors",children:(0,n.jsx)(E.A,{className:"w-4 h-4"})})]})]},e.id))}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("button",{onClick:()=>{let e={id:"journey_".concat(Date.now()),name:"My Phoenix Journey - ".concat(new Date().toLocaleDateString()),events:er,createdAt:new Date().toISOString(),status:"active"},t=JSON.parse(localStorage.getItem("userJourneys")||"[]");t.push(e),localStorage.setItem("userJourneys",JSON.stringify(t)),eo([]),ei([]),ed([]),em([]),eg({viewed:0,liked:0,maybe:0,notify:0}),ea(0),alert("\uD83C\uDF89 Journey saved to My Journeys! Check the My Events page to manage your saved journeys.")},className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-medium transition-colors",children:"\uD83D\uDE80 Start Your Journey"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsx)("button",{onClick:()=>{let e={id:"draft_".concat(Date.now()),name:"Draft Journey - ".concat(new Date().toLocaleDateString()),events:er,createdAt:new Date().toISOString(),status:"draft"},t=JSON.parse(localStorage.getItem("userDrafts")||"[]");t.push(e),localStorage.setItem("userDrafts",JSON.stringify(t)),alert("\uD83D\uDCBE Journey saved as draft!")},className:"bg-slate-200 hover:bg-slate-300 text-slate-700 py-2 px-3 rounded-lg text-sm transition-colors",children:"\uD83D\uDCBE Save Draft"}),(0,n.jsx)("button",{onClick:()=>eN(!0),className:"bg-green-200 hover:bg-green-300 text-green-700 py-2 px-3 rounded-lg text-sm transition-colors",children:"\uD83D\uDCE4 Share"})]})]})]})]})]})]})]})]}),ej&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md mx-4 shadow-2xl",children:[(0,n.jsxs)("div",{className:"text-center mb-6",children:[(0,n.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDE80"}),(0,n.jsx)("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Share Your Journey"}),(0,n.jsx)("p",{className:"text-slate-600 text-sm",children:"Let friends join your adventure!"})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("button",{onClick:()=>eR("copy"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[(0,n.jsx)("span",{children:"\uD83D\uDCCB"}),(0,n.jsx)("span",{children:"Copy Link"})]}),(0,n.jsxs)("button",{onClick:()=>eR("social"),className:"w-full bg-purple-500 hover:bg-purple-600 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[(0,n.jsx)("span",{children:"\uD83D\uDC26"}),(0,n.jsx)("span",{children:"Share on Social"})]}),(0,n.jsxs)("button",{onClick:()=>eR("link"),className:"w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[(0,n.jsx)("span",{children:"✉️"}),(0,n.jsx)("span",{children:"Send Email"})]})]}),(0,n.jsx)("button",{onClick:()=>eN(!1),className:"w-full mt-4 bg-slate-100 hover:bg-slate-200 text-slate-600 py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"})]})}),(0,n.jsx)(u.A,{isOpen:q.isOpen,contentType:q.contentType,contentId:q.contentId,contentTitle:q.contentTitle,onClose:()=>{X({isOpen:!1,contentType:"event",contentId:"",contentTitle:""})}})]})}},4307:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(2115);let a=n.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?n.createElement("title",{id:a},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"}))})},5442:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(2115);let a=n.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?n.createElement("title",{id:a},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))})},5529:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(2115);let a=n.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?n.createElement("title",{id:a},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))})},8984:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(2115);let a=n.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?n.createElement("title",{id:a},s):null,n.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))})},9889:(e,t,s)=>{Promise.resolve().then(s.bind(s,4167))},9949:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(2115);let a=n.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?n.createElement("title",{id:a},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))})}},e=>{e.O(0,[168,240,4684,6766,4236,3238,6303,8441,5964,7358],()=>e(e.s=9889)),_N_E=e.O()}]);