(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4586],{58:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(2115);let r=a.forwardRef(function(e,s){let{title:t,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},l),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))})},1316:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(2115);let r=a.forwardRef(function(e,s){let{title:t,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},l),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))})},1820:(e,s,t)=>{Promise.resolve().then(t.bind(t,6987))},6903:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(2115);let r=a.forwardRef(function(e,s){let{title:t,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},l),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))})},6987:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=t(5155),r=t(2115),l=t(5695),n=t(6766),i=t(6874),c=t.n(i),o=t(3238),d=t(4224),x=t(4236),m=t(58),h=t(1316),u=t(6903);function f(){let e=(0,l.useParams)(),s=(0,l.useRouter)(),t=e.id,[i,f]=(0,r.useState)("followers"),[p,j]=(0,r.useState)(null),{authState:v,user:N}=(0,x.A)(),b=d.vx.find(e=>e.id===parseInt(t));if(!b)return(0,a.jsx)(o.default,{children:(0,a.jsxs)("div",{className:"p-4 text-center",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-slate-800 mb-2",children:"User Not Found"}),(0,a.jsx)("p",{className:"text-slate-600 mb-4",children:"This user doesn't exist or has been removed."}),(0,a.jsx)("button",{onClick:()=>s.back(),className:"btn-primary",children:"Go Back"})]})});let g=d.vx.filter(e=>e.id!==parseInt(t)),w=(0,d.PL)(parseInt(t)),y=N?(0,d.Ap)(parseInt(N.id.toString()),parseInt(t)):[],k=g.slice(0,Math.floor(.7*g.length)),C=g.slice(0,Math.floor(.6*g.length)),S=async e=>{if(!(null==N?void 0:N.id))return void console.error("No current user for friend request");j(e.id.toString());try{console.log("\uD83E\uDD1D Sending friend request from ".concat(N.id," to ").concat(e.id));let s=await fetch("/api/friends/requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fromUserId:N.id.toString(),toUserId:e.id.toString(),fromUser:{id:N.id.toString(),name:N.name||"Unknown",username:N.username||"user".concat(N.id),avatar:N.picture||"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(N.name||"User"),"&background=64748b&color=fff"),trustScore:N.trustScore||50},toUser:{id:e.id.toString(),name:e.name,username:e.username||"user".concat(e.id),avatar:e.avatar,trustScore:e.trustScore||50}})});if(s.ok){let e=await s.json();console.log("✅ Friend request sent successfully:",e)}else{let e=await s.json();console.error("❌ Friend request failed:",e),alert("Failed to send friend request: ".concat(e.error))}}catch(e){console.error("❌ Friend request error:",e),alert("Failed to send friend request. Please try again.")}finally{j(null)}},E=function(e){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(0,a.jsxs)("div",{className:"p-4 bg-white border border-slate-200 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)(c(),{href:"/user/".concat(e.id),children:(0,a.jsx)(n.default,{src:e.avatar,alt:e.name,width:48,height:48,className:"rounded-xl hover:opacity-80 transition-opacity"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(c(),{href:"/user/".concat(e.id),className:"hover:text-cyan-600 transition-colors",children:(0,a.jsx)("h4",{className:"font-semibold text-slate-800",children:e.name})}),(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:["@",e.name.toLowerCase().replace(/\s+/g,"_")]}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:[e.location," • Trust: ",e.trustScore]})]})]}),e.bio&&(0,a.jsx)("p",{className:"text-sm text-slate-600 mb-3 line-clamp-2",children:e.bio}),s&&(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>S(e),disabled:p===e.id.toString(),className:"flex-1 btn-secondary text-sm py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-1"}),p===e.id.toString()?"Sending...":"Add Friend"]}),(0,a.jsxs)(c(),{href:"/create-post?reviewFor=".concat(e.id),className:"flex-1 btn-primary flex items-center justify-center text-sm py-2",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mr-1"}),"Review"]})]})]},e.id)};return(0,a.jsx)(o.default,{children:(0,a.jsxs)("div",{className:"p-4 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{onClick:()=>s.back(),className:"p-2 rounded-xl hover:bg-slate-100 transition-colors duration-200",children:(0,a.jsx)(u.A,{className:"w-5 h-5 text-slate-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h1",{className:"text-xl font-semibold text-slate-800",children:[b.name,"'s Friends"]}),(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:[b.location," • ",b.friendsCount," connections"]})]})]}),(0,a.jsxs)("div",{className:"card-soft",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-1 p-1 bg-slate-100 rounded-xl mb-6",children:[(0,a.jsxs)("button",{onClick:()=>f("followers"),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat("followers"===i?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"),children:["Followers",(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:["(",k.length,")"]})]}),(0,a.jsxs)("button",{onClick:()=>f("following"),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat("following"===i?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"),children:["Following",(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:["(",C.length,")"]})]}),(0,a.jsxs)("button",{onClick:()=>f("mutual"),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat("mutual"===i?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"),children:["Mutual",(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:["(",y.length,")"]})]}),(0,a.jsxs)("button",{onClick:()=>f("friends"),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat("friends"===i?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"),children:["Friends",(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:["(",w.length,")"]})]})]}),(()=>{switch(i){case"followers":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-600 mb-4",children:["People who follow ",b.name," (",k.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:k.map(e=>E(e))})]});case"following":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-600 mb-4",children:["People ",b.name," follows (",C.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:C.map(e=>E(e))})]});case"mutual":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-600 mb-4",children:["Friends you both have (",y.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:y.map(e=>(0,a.jsxs)("div",{className:"p-4 bg-cyan-50 border border-cyan-200 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)(c(),{href:"/user/".concat(e.id),children:(0,a.jsx)(n.default,{src:e.avatar,alt:e.name,width:48,height:48,className:"rounded-xl hover:opacity-80 transition-opacity"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(c(),{href:"/user/".concat(e.id),className:"hover:text-cyan-600 transition-colors",children:(0,a.jsx)("h4",{className:"font-semibold text-slate-800",children:e.name})}),(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:["@",e.name.toLowerCase().replace(/\s+/g,"_")]}),(0,a.jsx)("p",{className:"text-xs text-cyan-600 font-medium",children:"\uD83E\uDD1D Mutual friend"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(c(),{href:"/user/".concat(e.id),className:"flex-1 btn-secondary text-sm py-2 text-center",children:"View Profile"}),(0,a.jsx)("button",{className:"flex-1 btn-primary text-sm py-2",children:"Message"})]})]},e.id))})]});case"friends":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-600 mb-4",children:[b.name,"'s friends - mutual following (",w.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:w.map(e=>(0,a.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)(c(),{href:"/user/".concat(e.id),children:(0,a.jsx)(n.default,{src:e.avatar,alt:e.name,width:48,height:48,className:"rounded-xl hover:opacity-80 transition-opacity"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(c(),{href:"/user/".concat(e.id),className:"hover:text-green-600 transition-colors",children:(0,a.jsx)("h4",{className:"font-semibold text-slate-800",children:e.name})}),(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:["@",e.name.toLowerCase().replace(/\s+/g,"_")]}),(0,a.jsxs)("p",{className:"text-xs text-green-600 font-medium",children:["\uD83D\uDC9A ",b.name," and ",e.name," follow each other"]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(c(),{href:"/user/".concat(e.id),className:"flex-1 btn-secondary text-sm py-2 text-center",children:"View Profile"}),(0,a.jsx)("button",{className:"flex-1 btn-primary text-sm py-2",children:"Message"})]})]},e.id))})]});default:return null}})()]})]})})}}},e=>{e.O(0,[4684,6766,4236,3238,8441,5964,7358],()=>e(e.s=1820)),_N_E=e.O()}]);